name: web_application
components:
  fe1:
    type: service
    must: true
    flavours:
      large:
        uses:  [ be1 ] 
      medium:
        uses:  [ be1 ] 
  fe2:
    type: service
    flavours:
      large:
        uses:  [ be2 ] 
  be1:
    type: service
    must: true
    flavours:
      large:
        uses:  [ db1 ] 
      medium:
        uses:  [ db1 ] 
      tiny:
        uses:  [ ] 
  be2:
    type: service
    flavours:
      medium:
        uses:  [ db1 ] 
      tiny:
        uses: [ db1 ] 
  db1:
    type: database
    must: true
    flavours:
      large:
        uses:  [ ] 
requirements:
  components:
    fe1:
      common:
        bwIn:
          value: 1000
        bwOut:
          value: 1000
        availability:
          value: 0.98
          soft: true
        security:
          value: [ssl, firewall]
      flavour-specific:
        large:
          cpu:
            value: 2
            soft: true
          ram:
            value: 1
        medium:
          cpu:
            value: 1
          ram:
            value: 0.5
    fe2:
      common:
        bwIn:
          value: 500
        bwOut:
          value: 500
        availability:
          value: 0.97
          soft: true
        security:
          value: [ssl, firewall]
      flavour-specific:
        large:
          cpu:
            value: 2
          ram:
            value: 1
    be1:
      common:
        bwIn:
          value: 1000
        bwOut:
          value: 600
        availability: 
          value: 0.98
          soft: true
        security:
          value: [ssl]
      flavour-specific:
        large:
          cpu:
            value: 4
          ram:
            value: 8
        medium:
          cpu:
            value: 2
          ram:
            value: 4
        tiny:
          cpu:
            value: 1
          ram:
            value: 2
    be2:
      common:
        bwIn:
          value: 800
        bwOut:
          value: 500
        availability: 
          value: 0.97
          soft: true
        security:
          value: [ssl]
      flavour-specific:
        medium:
          cpu:
            value: 2
          ram:
            value: 3
        tiny:
          cpu:
            value: 1
          ram:
            value: 2
    db1:
      common:
        cpu:
          value: 1
        ram:
          value: 8
        storage:
          value: 512
        bwIn:
          value: 200
        bwOut:
          value: 200
        availability: 
          value: 0.99
          soft: true
        security:
          value: [ssl, encrypted_storage]
      flavour-specific:
        large:
          cpu:
            value: 1
          ram:
            value: 2
  dependencies:
    fe1:
      be1:
        latency:
          value: 50
        availability:
          value: 0.97
      db1:
        latency:
          value: 40
    fe2:
      be2:
        latency:
          value: 40
    be1:
      db1:
        latency:
          value: 50
        availability:
          value: 0.98
    be2:
      db1:
        latency:
          value: 50
        availability:
          value: 0.98
  budget:
    cost: 100
    carbon: 1.3